<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-08-28 Tue 07:34 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title></title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="weiwu" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../styles/demo/css/demo.css"/>
<link href="https://fonts.proxy.ustclug.org/css?family=Roboto+Slab:400,700|Inconsolata:400,700" rel="stylesheet" type="text/css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "left",
        displayIndent: "5em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "left",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline2">1. Portfolio Optimization objective functions</a>
<ul>
<li><a href="#orgheadline1">1.1. Jargon</a></li>
</ul>
</li>
<li><a href="#orgheadline10">2. Basics</a>
<ul>
<li><a href="#orgheadline3">2.1. Risk aversion parameter</a></li>
<li><a href="#orgheadline4">2.2. alpha</a></li>
<li><a href="#orgheadline5">2.3. Quadratic function</a></li>
<li><a href="#orgheadline6">2.4. Quadratic programming</a></li>
<li><a href="#orgheadline7">2.5. Nonlinear programming</a></li>
<li><a href="#orgheadline8">2.6. Equality constraints</a></li>
<li><a href="#orgheadline9">2.7. Regime shifts</a></li>
</ul>
</li>
<li><a href="#orgheadline11">3. Sparse Markowitz Portfolios</a></li>
<li><a href="#orgheadline12">4. Mean-Reverting Portfolios</a></li>
<li><a href="#orgheadline17">5. Active portfolio management</a>
<ul>
<li><a href="#orgheadline16">5.1. overview</a>
<ul>
<li><a href="#orgheadline13">5.1.1. risk aversion from unknown categories.</a></li>
<li><a href="#orgheadline14">5.1.2. tracking the benchmark</a></li>
<li><a href="#orgheadline15">5.1.3. easy tracking for management</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline18">6. Exceptional Return, benchmarks and value added</a></li>
<li><a href="#orgheadline36">7. Portfolio Construction</a>
<ul>
<li><a href="#orgheadline19">7.1. input:</a></li>
<li><a href="#orgheadline31">7.2. constraints</a>
<ul>
<li><a href="#orgheadline26">7.2.1. alpha constraint</a></li>
<li><a href="#orgheadline27">7.2.2. risk aversion</a></li>
<li><a href="#orgheadline30">7.2.3. transaction cost</a></li>
</ul>
</li>
<li><a href="#orgheadline32">7.3. SCREENS</a></li>
<li><a href="#orgheadline33">7.4. Stratification</a></li>
<li><a href="#orgheadline34">7.5. comparison with asset selection and asset allocation</a></li>
<li><a href="#orgheadline35">7.6. solution</a></li>
</ul>
</li>
<li><a href="#orgheadline39">8. Asset Allocation</a>
<ul>
<li><a href="#orgheadline37">8.1. tactical asset allocation</a></li>
<li><a href="#orgheadline38">8.2. asset allocation strategies is a three-step process:</a></li>
</ul>
</li>
<li><a href="#orgheadline64">9. Black litterman model step-by-step</a>
<ul>
<li><a href="#orgheadline40">9.1. Modern Portfolio Optimization</a></li>
<li><a href="#orgheadline41">9.2. Problem of mean-variance optimization</a></li>
<li><a href="#orgheadline43">9.3. Introduction</a>
<ul>
<li><a href="#orgheadline42">9.3.1. reverse optimization to mitigate this problem for unconstrained solution</a></li>
</ul>
</li>
<li><a href="#orgheadline54">9.4. Black-Litterman model and the process of building the required inputs.</a>
<ul>
<li><a href="#orgheadline51">9.4.1. Black-Litterman model</a></li>
<li><a href="#orgheadline52">9.4.2. Inputs</a></li>
<li><a href="#orgheadline53">9.4.3. Steps:</a></li>
</ul>
</li>
<li><a href="#orgheadline57">9.5. Implied confidence framework for the views</a>
<ul>
<li><a href="#orgheadline55">9.5.1. Implied confidence levels</a></li>
<li><a href="#orgheadline56">9.5.2. An intuitive approach</a></li>
</ul>
</li>
<li><a href="#orgheadline60">9.6. The constrained portfolio</a>
<ul>
<li><a href="#orgheadline58">9.6.1. Risk constraint:</a></li>
<li><a href="#orgheadline59">9.6.2. Budget constraint:</a></li>
</ul>
</li>
<li><a href="#orgheadline61">9.7. Select asset classes</a></li>
<li><a href="#orgheadline62">9.8. Deployment on GS:</a></li>
<li><a href="#orgheadline63">9.9. Shortfall of BLM</a></li>
</ul>
</li>
<li><a href="#orgheadline72">10. Risk parity</a>
<ul>
<li><a href="#orgheadline68">10.1. Basics</a>
<ul>
<li><a href="#orgheadline65">10.1.1. Risk Contribution</a></li>
<li><a href="#orgheadline66">10.1.2. Marginal risk contribution</a></li>
<li><a href="#orgheadline67">10.1.3. risk parity</a></li>
</ul>
</li>
<li><a href="#orgheadline69">10.2. IMPLEMENTING ACTUAL RISK PARITY PORTFOLIOS</a></li>
<li><a href="#orgheadline70">10.3. INVESTING IN RISK PARITY</a></li>
<li><a href="#orgheadline71">10.4. Conclusion</a></li>
</ul>
</li>
<li><a href="#orgheadline73">11. NLP</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2"><span class="section-number-2">1</span> Portfolio Optimization objective functions</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>risk parity portfolios (Roncalli, 2013)</li>
<li>Black–Litterman portfolios (Black and Litterman, 1992)</li>
<li>log-optimal portfolios (Cover and Ordentlich, 1996)</li>
<li>conditional value at risk (cVaR) and coherent risk measures for portfolios (Rockafellar and Uryasev, 2000)</li>
</ul>

<div class="figure">
<p><img src="./images/model_comparison.png" alt="model_comparison.png" />
</p>
<p><span class="figure-number">Figure 1:</span> model comparison</p>
</div>
</div>
<div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> Jargon</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Utility Values and risk aversion</li>
</ul>
<p>
risk aversion investor gain the same amount of utility spending more on the risk.
Because risk can be quantified as the sum of the variance of the returns over time, it is possible to assign a utility score (aka utility value, utility function) to any portfolio by subtracting its variance from its expected return to yield a number that would be commensurate with an investor's tolerance for risk, or a measure of their satisfaction with the investment.
\[Utility Score = Expected Return – 0.005\sigma^2 × Risk Aversion Coefficient\]
</p>
<ul class="org-ul">
<li>Risk-indifference curve</li>
</ul>
<p>
The set of all portfolios with the same utility score plots as a risk-indifference curve. An investor will accept any portfolio with a utility score on her risk-indifference curve as being equally acceptable.
</p>
</div>
</div>
</div>


<div id="outline-container-orgheadline10" class="outline-2">
<h2 id="orgheadline10"><span class="section-number-2">2</span> Basics</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">2.1</span> Risk aversion parameter</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The weight vector that maximizes the expected portfolio growth rate E log(1 + Rtp) (subject to 1T w = 1, w ≥ 0) is called the Kelly optimal portfolio or log-optimal portfolio. Using the quadratic approximation of the logarithm log(1 + a) ≈ a − (1/2)a2 we obtain
\[E[log(1 + Rtp)] ≈ E[Rtp − (1/2)(Rtp)2]
= µT w − (1/2)wT (Σ + µµT )w\],
</p>

<p>
where µ = Ert and Σ = E(rt−µ)(rt−µ)T are the mean and covariance of the return rt.
</p>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">2.2</span> alpha</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Alpha is used to determine by how much the realized return of the portfolio varies from the required return, as determined by CAPM.
\[\alpha = R_{portfolio} - [R_f + (R_m - R_f)\beta]\]
</p>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">2.3</span> Quadratic function</h3>
<div class="outline-text-3" id="text-2-3">
<p>
In algebra, a quadratic function, a quadratic polynomial, a polynomial of degree 2, or simply a quadratic, is a polynomial function in one or more variables in which the highest-degree term is of the second degree. For example, a quadratic function in three variables x, y, and z contains exclusively terms x2, y2, z2, xy, xz, yz, x, y, z, and a constant:
</p>

<p>
\[
{\displaystyle f(x,y,z)=ax^{2}+by^{2}+cz^{2}+dxy+exz+fyz+gx+hy+iz+j,} f(x,y,z)=ax^{2}+by^{2}+cz^{2}+dxy+exz+fyz+gx+hy+iz+j,\]
with at least one of the coefficients a, b, c, d, e, or f of the second-degree terms being non-zero.
</p>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6"><span class="section-number-3">2.4</span> Quadratic programming</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>Quadratic programming (QP) is the process of solving a special type of mathematical optimization problem—specifically, a (linearly constrained) quadratic optimization problem, that is, the problem of optimizing (minimizing or maximizing) a quadratic function of several variables subject to linear constraints on these variables. Quadratic programming is a particular type of nonlinear programming.</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">2.5</span> Nonlinear programming</h3>
<div class="outline-text-3" id="text-2-5">
<p>
the process of solving an optimization problem defined by a system of equalities and inequalities, collectively termed constraints, over a set of unknown real variables, along with an objective function to be maximized or minimized, where some of the constraints or the objective function are nonlinear.
</p>
</div>
</div>
<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">2.6</span> Equality constraints</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Quadratic programming is particularly simple when Q is positive definite and there are only equality constraints; specifically, the solution process is linear. By using Lagrange multipliers and seeking the extremum of the Lagrangian, it may be readily shown that the solution to the equality constrained problem
\[{\text{Minimize}}\quad {\tfrac {1}{2}}\mathbf {x} ^{\mathrm {T} }Q\mathbf {x} +\mathbf {c} ^{\mathrm {T} }\mathbf {x}
{\text{subject to}}\quad E\mathbf {x} =\mathbf {d}\]
</p>

<p>
is given by the linear system
</p>

<p>
\[{\begin{bmatrix}Q&E^{T}\\E&0\end{bmatrix}}{\begin{bmatrix}\mathbf {x} \\\lambda \end{bmatrix}}={\begin{bmatrix}-\mathbf {c} \\\mathbf {d} \end{bmatrix}}\]
where \({\displaystyle \lambda }\)  is a set of Lagrange multipliers which come out of the solution alongside \({\displaystyle \mathbf {x} }\) .
</p>
</div>
</div>
<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">2.7</span> Regime shifts</h3>
<div class="outline-text-3" id="text-2-7">
<p>
OLS assumptions:
</p>
<ul class="org-ul">
<li>Linear in Parameters</li>
<li>Random Sample of n Observations</li>
<li>Zero Conditional Mean</li>
<li>No Perfect Collinearity</li>
<li>Homoskedasticity</li>
</ul>

<p>
Shortfall of Modern Portfolio Theory(MPT):
</p>
<ul class="org-ul">
<li>It is based on the historical return performance. If the political visk shows up or the fund changes policy or manager, the corporate or the fund performance may change, investor views can't be integrated into the problem.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-2">
<h2 id="orgheadline11"><span class="section-number-2">3</span> Sparse Markowitz Portfolios</h2>
</div>

<div id="outline-container-orgheadline12" class="outline-2">
<h2 id="orgheadline12"><span class="section-number-2">4</span> Mean-Reverting Portfolios</h2>
</div>

<div id="outline-container-orgheadline17" class="outline-2">
<h2 id="orgheadline17"><span class="section-number-2">5</span> Active portfolio management</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-orgheadline16" class="outline-3">
<h3 id="orgheadline16"><span class="section-number-3">5.1</span> overview</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Modern portfolio theory looks at total risk and total return.
</p>

<p>
The institutional investor cares about active risk and active return.
For that reason, we will concentrate on the more general problem of managing relative to a benchmark.
This focus on active management arises for several <b>reasons</b>:
</p>
</div>

<div id="outline-container-orgheadline13" class="outline-4">
<h4 id="orgheadline13"><span class="section-number-4">5.1.1</span> risk aversion from unknown categories.</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
Clients can clump the large number of investment advisers into recognizable categories. With the advisers thus pigeonholed, the client (or consultant) can restrict searches and peer comparisons to pigeons in the same hole.
</p>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-4">
<h4 id="orgheadline14"><span class="section-number-4">5.1.2</span> tracking the benchmark</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
The benchmark acts as a set of instructions from the fund sponsor, as principal, to the investment manager, as agent. The benchmark defines the manager’s investment neighborhood. Moves away from the benchmark carry substantial investment and business risk.
</p>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-4">
<h4 id="orgheadline15"><span class="section-number-4">5.1.3</span> easy tracking for management</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
Benchmarks allow the trustee or sponsor to manage the aggregate portfolio without complete knowledge of the holdings of each manager. The sponsor can manage a mix of benchmarks, keeping the “big picture.""
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-2">
<h2 id="orgheadline18"><span class="section-number-2">6</span> Exceptional Return, benchmarks and value added</h2>
<div class="outline-text-2" id="text-6">
<p>
The CAPM provides consensus expected returns. A multiple-factor model can help to control risk.
</p>

<p>
accurate forecasts of expected return.
a riskfree component (the time premium), a benchmark component\(\beta_n \mu_B\)  (the risk premium), a benchmark timing component\(\beta_n \delta f_B\) (exceptional benchmark return), and an alpha (expected residual return). If Rn is the total return on asset n.
\[E{R_n} = 1 + i_F + \beta_n \mu_B + \beta_n \delta f_B + \alpha_n\]
</p>
<ul class="org-ul">
<li>\(\beta_n = \frac{Cov{r_n,r_B}}{Var{r_B}}\)</li>
<li>The Risk Premium \(\beta_n \mu_B\)</li>
</ul>
<p>
The expected excess return on the benchmark, \(\mu_B\), is usually estimated by analysts as a very long run (70+ years) average (although other estimation methods are common). A number between 3 and 7 percent per annum is reasonable for most equity markets.
</p>
<ul class="org-ul">
<li>Exceptional Benchmark return \(\beta_n \Delta f_B\)</li>
</ul>
<p>
\(\Delta f_B\) is your measure of that difference between the expected excess return on the benchmark in the near future and the long-run expected excess return.
</p>
<ul class="org-ul">
<li>\(\alpha_n\)</li>
</ul>
<p>
expected residual return, $&alpha;<sub>n</sub> = E{&Theta;<sub>n</sub>}.$
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">parameters</th>
<th scope="col" class="org-left">meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">\(\beta_n\)</td>
<td class="org-left">the forecast beta of the portfolio versus the benchmark</td>
</tr>

<tr>
<td class="org-left">\(r_f\)</td>
<td class="org-left">risk-free return</td>
</tr>

<tr>
<td class="org-left">\(\mu_B\)</td>
<td class="org-left">benchmark return over the last period(monthly)</td>
</tr>

<tr>
<td class="org-left">\(\Delta f_B\)</td>
<td class="org-left">\(r_p - r_f - \mu_B\)</td>
</tr>

<tr>
<td class="org-left">f<sub>b</sub></td>
<td class="org-left">\(\displaystyle\sum_{n} h_B(n)E{R_N}-(1+i_F)\)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgheadline36" class="outline-2">
<h2 id="orgheadline36"><span class="section-number-2">7</span> Portfolio Construction</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">7.1</span> input:</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>the current portfolio(with certainty)</li>
<li>alphas(often unreasonable and subject to hidden biases)</li>
<li>covariance estimates(noisy estimates)</li>
<li>transactions cost estimates(noisy estimates)</li>
<li>an active risk aversion(self-biased)</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline31" class="outline-3">
<h3 id="orgheadline31"><span class="section-number-3">7.2</span> constraints</h3>
<div class="outline-text-3" id="text-7-2">
<p>
<b>We can replace any portfolio construction process, regardless of its sophistication, by a process that first refines the alphas and then uses a simple unconstrained mean/variance optimization to determine the active positions.</b>
</p>
</div>
<div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">7.2.1</span> alpha constraint</h4>
<div class="outline-text-4" id="text-7-2-1">
<ul class="org-ul">
<li>most institutional portfolio managers do not take short positions and limit the amount of cash in the portfolio.</li>
<li>Others may restrict asset coverage because of requirements concerning liquidity, self-dealing, and so on.</li>
<li>A manager may require that the portfolio be neutral across economic sectors or industries.</li>
<li>The manager may limit individual stock positions to ensure diversification of the active bets.</li>
<li>The manager may want to avoid any position based on a forecast of the benchmark portfolio’s performance.</li>
<li>portfolio holdings cannot exceed benchmark holdings by more than 5%.</li>
</ul>
</div>
<ol class="org-ol"><li><a id="orgheadline20"></a>Scale the Alphas<br  /><div class="outline-text-5" id="text-7-2-1-1">
<p>
\[\alpha=volatility*IC*score\]
</p>
</div></li>
<li><a id="orgheadline21"></a>Trim Alpha Outliers<br  /></li>
<li><a id="orgheadline22"></a>Neutralization<br  /></li>
<li><a id="orgheadline23"></a>Risk-Factor-Neutral Alphas<br  /></li>
<li><a id="orgheadline24"></a>For index-tracking portfolios<br  /><div class="outline-text-5" id="text-7-2-1-5">
<ul class="org-ul">
<li>Take advantage of ﬂexible options for risk control.
<ul class="org-ul">
<li>Minimize the tracking error of your portfolio in the objective or place a hard limit on tracking error using a risk constraint.</li>
<li>Use more than one risk model to incorporate several perspectives on risk.</li>
<li>Include risk elements that use more than one benchmark or model portfolio.</li>
</ul></li>
<li>Incorporate all the transaction-related costs that impact performance. The transaction cost types available in the optimizer can be used in any combination to accurately reﬂect overall costs.
<ul class="org-ul">
<li>Capture market impact using non-linear market-impact models (quadratic, 3/2, and 5/3 powers) or a piecewiselinear approximation.</li>
<li>Use the fully integrated Goldman Sachs Shortfall Model.</li>
<li>Include commissions and brokerage fees using linear costs.</li>
</ul></li>
<li>Place explicit limits on trading activity.
<ul class="org-ul">
<li>Limit overall portfolio turnover or limit turnover of a set of assets.</li>
<li>Place asset-specifc limits on trading; for example, limit trade size to a fraction of average daily volume.</li>
</ul></li>
<li>Control portfolio beta using Axioma-provided historical betas, predicted betas computed relative to any benchmark you choose, or betas you supply.</li>
<li>Limit the number of names held or traded</li>
</ul>
</div></li>
<li><a id="orgheadline25"></a>For actively managed portfolios…<br  /><div class="outline-text-5" id="text-7-2-1-6">
<p>
In addition to the risk and transaction cost controls available for passive portfolio management, the modeling library contains many options designed to get the most from your alpha signal.
• Augment your risk control using the Alpha Factor. The Alpha Factor compensates for components of your alpha signal that are not included in the risk model, providing more accurate predicted risk estimates.
• Limit risk contributions at the factor or asset level.
• Use Robust Optimization to explicitly incorporate uncertainty in your alpha estimates.
• Incorporate additional tilts in your objective. Tilts can be implemented on any factor, including risk factors, factors from one of Axioma’s factor libraries, or user-supplied factors.
• Prevent small positions and small trades with threshold constraints.
</p>
</div></li></ol>
</div>
<div id="outline-container-orgheadline27" class="outline-4">
<h4 id="orgheadline27"><span class="section-number-4">7.2.2</span> risk aversion</h4>
</div>

<div id="outline-container-orgheadline30" class="outline-4">
<h4 id="orgheadline30"><span class="section-number-4">7.2.3</span> transaction cost</h4>
<div class="outline-text-4" id="text-7-2-3">
</div><ol class="org-ol"><li><a id="orgheadline28"></a>on stock side<br  /><div class="outline-text-5" id="text-7-2-3-1">
<ul class="org-ul">
<li>Transactions costs increase with trade size and the desire for quick execution, which help to identify the manager as an informed trader and require increased inventory risk by the liquidity supplier.</li>
<li>Transactions costs are difficult to measure. At the same time, accurate estimates of transactions costs, especially distinctions in transactions costs among different stock trades, can significantly affect realized value added.</li>
<li>Transactions costs lower value added, but you can often achieve at least 75 percent of the value added with only half the turnover (and half the transactions costs). You can do better by distinguishing stocks by their transactions costs.</li>
<li>Trading is itself a portfolio optimization problem, distinct from the portfolio construction problem. Optimal trading can lower transactions costs, though at the expense of additional short-term risk.</li>
<li>There are several options for trade implementation, with rules of thumb on which to use when.
<ul class="org-ul">
<li>VWAP.</li>
<li>BARRA model.</li>
</ul></li>
</ul>
</div></li>

<li><a id="orgheadline29"></a>on portfolio side<br  /><div class="outline-text-5" id="text-7-2-3-2">
<ul class="org-ul">
<li>construct portfolio relative to industry neutral with categories.</li>
</ul>
</div></li></ol>
</div>
</div>
<div id="outline-container-orgheadline32" class="outline-3">
<h3 id="orgheadline32"><span class="section-number-3">7.3</span> SCREENS</h3>
<div class="outline-text-3" id="text-7-3">
<ul class="org-ul">
<li>Rank the stocks by alpha.</li>
<li>Choose the first 50 stocks (for example).</li>
<li>Equal-weight (or capitalization-weight) the stocks.
<ul class="org-ul">
<li>rebalancing:
<ul class="org-ul">
<li>divide the stocks into three categores, top 40, next 60, remaining 100.</li>
<li>buy any stocks on the top 40 not in the portfolio.</li>
<li>sell any stocks on the bottom 100 in the portfolio.</li>
<li>holding any stocks on the middle in the portfolio.</li>
</ul></li>
<li>pros:
<ul class="org-ul">
<li>The screen enhances alphas by concentrating the portfolio in the high-alpha stocks.</li>
<li>It strives for risk control by including a sufficient number of stocks (50 in the example) and by weighting them to avoid concentration in any single stock.</li>
<li>Transactions costs are limited by controlling turnover through judicious choice of the size of the buy, sell, and hold lists.</li>
</ul></li>
<li>cons:
<ul class="org-ul">
<li>They ignore all information in the alphas apart from the rankings.</li>
<li>They do not protect against biases in the alphas.</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline33" class="outline-3">
<h3 id="orgheadline33"><span class="section-number-3">7.4</span> Stratification</h3>
<div class="outline-text-3" id="text-7-4">
<ul class="org-ul">
<li>splitting the list of followed stocks into categories.</li>
<li>classify the stocks in each sector by size: big, medium, and small.</li>
<li>industry neutral.</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline34" class="outline-3">
<h3 id="orgheadline34"><span class="section-number-3">7.5</span> comparison with asset selection and asset allocation</h3>
<div class="outline-text-3" id="text-7-5">
<p>
The result is that portfolios constructed using returns-based analysis are very close to mean/variance portfolios, although they require much more effort to construct.
</p>
</div>
</div>
<div id="outline-container-orgheadline35" class="outline-3">
<h3 id="orgheadline35"><span class="section-number-3">7.6</span> solution</h3>
<div class="outline-text-3" id="text-7-6">
<ul class="org-ul">
<li>placing limits on active stock positions.</li>
<li>limiting turnover.</li>
<li>constraining holdings in certain categories of stocks to match the benchmark holdings.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgheadline39" class="outline-2">
<h2 id="orgheadline39"><span class="section-number-2">8</span> Asset Allocation</h2>
<div class="outline-text-2" id="text-8">
<p>
Asset allocation comes in several varieties: strategic versus tactical, and domestic versus global.
</p>

<p>
The process of selecting a target asset allocation is called strategic asset allocation.
</p>

<p>
The variation in asset allocation around that target is called tactical asset allocation.
</p>
</div>
<div id="outline-container-orgheadline37" class="outline-3">
<h3 id="orgheadline37"><span class="section-number-3">8.1</span> tactical asset allocation</h3>
<div class="outline-text-3" id="text-8-1">
<ul class="org-ul">
<li>stocks</li>
<li>bonds</li>
<li>cash</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline38" class="outline-3">
<h3 id="orgheadline38"><span class="section-number-3">8.2</span> asset allocation strategies is a three-step process:</h3>
<div class="outline-text-3" id="text-8-2">
<ul class="org-ul">
<li>forecasting returns</li>
<li>building portfolios</li>
<li>analyzing out-of-sample performance.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgheadline64" class="outline-2">
<h2 id="orgheadline64"><span class="section-number-2">9</span> Black litterman model step-by-step</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-orgheadline40" class="outline-3">
<h3 id="orgheadline40"><span class="section-number-3">9.1</span> Modern Portfolio Optimization</h3>
<div class="outline-text-3" id="text-9-1">
<p>
Markowitz mean-variance optimization:
\[max: \omega\mu - \omega\Sigma\omega'/2\]
</p>

<p>
Lagrange multiplier solution: \(\omega=(\lambda\Sigma)^{-1}\mu\)
</p>

<p>
Two most important elements: Expected return \(\mu\), Covariance matrix \(\Sigma\).
</p>
</div>
</div>

<div id="outline-container-orgheadline41" class="outline-3">
<h3 id="orgheadline41"><span class="section-number-3">9.2</span> Problem of mean-variance optimization</h3>
<div class="outline-text-3" id="text-9-2">
<ul class="org-ul">
<li>Extreme long or short positions</li>
</ul>
<p>
It could bring extreme long or short positions without constraint(excluding risk exposure constraint, weight constraint).
</p>

<ul class="org-ul">
<li>Heavy weight on a small number of assets</li>
</ul>
<p>
When subject to a long only constraint, portfolios will concentrate in a relatively small number of assets.
</p>

<ul class="org-ul">
<li>Importance of expected return</li>
</ul>
<p>
A small increase in the expected return of one of the portfolio's assets can force half of the assets from the portfolio.
</p>

<ul class="org-ul">
<li>Lack of investor views</li>
</ul>
<p>
Expected return estimate is based on the historical return performance.
</p>

<p>
If the political risk shows up, macro economy forecast changes, or the fund changes policy or manager, the corporate or the fund performance may change.
Investor views can't be integrated into the problem.
</p>
</div>
</div>

<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43"><span class="section-number-3">9.3</span> Introduction</h3>
<div class="outline-text-3" id="text-9-3">
<p>
The Black-Litterman model uses a <b>Bayesian</b> approach to combine the subjective views of an investor regarding the expected returns of one or more assets with the market equilibrium vector of expected returns (the prior distribution) to form a new, mixed estimate of expected returns.
</p>

<p>
prior return distribution -&gt; posterior expected return estimated distribution.
</p>

<p>
Black–Litterman model is a mathematical model for portfolio allocation developed in 1990 at Goldman Sachs by Fischer Black and Robert Litterman, and published in 1992. It seeks to overcome problems that institutional investors have encountered in applying modern portfolio theory in practice, although the covariances of a few assets can be adequately estimated, <b>it is difficult to come up with reasonable estimates of expected returns</b>. The model starts with the equilibrium assumption that the asset allocation of a representative agent should be proportional to the market values of the available assets, and then modifies that to take into account the 'views' (i.e., the specific opinions about asset returns) of the investor in question to arrive at a bespoke asset allocation.
</p>

<p>
Black–Litterman overcame this problem by not requiring the user to input estimates of expected return; instead it assumes that the initial expected returns are whatever is required so that the equilibrium asset allocation is equal to what we observe in the markets. <b>The user is only required to state how his assumptions about expected returns differ from the market's and to state his degree of confidence in the alternative assumptions</b>. From this, the Black–Litterman method computes the desired (mean-variance efficient) asset allocation.
</p>

<p>
In general, when there are portfolio constraints - for example, when short sales are not allowed.
</p>
<ul class="org-ul">
<li>the easiest way to find the optimal portfolio is to use the Black–Litterman model to generate the expected returns for the assets,</li>
<li>and then use a mean-variance optimizer to solve the constrained optimization problem.</li>
</ul>
</div>

<div id="outline-container-orgheadline42" class="outline-4">
<h4 id="orgheadline42"><span class="section-number-4">9.3.1</span> reverse optimization to mitigate this problem for unconstrained solution</h4>
<div class="outline-text-4" id="text-9-3-1">
<p>
\[\Pi = \lambda\Sigma\omega_{mkt}\]
where
</p>

<p>
\(\Pi\) is the implied excess equilibrium return vector(Nx1 vector);
</p>

<p>
\(\lambda\) is the risk aversion coefficient, \(\lambda=\frac{E(r)-r_f}{\sigma^2}\);
</p>

<p>
\(\Sigma\) is the covariance matrix of excess returns(NxN matrix);
</p>

<p>
\(\omega_{mkt}\) is the market capitalization asset weight(Nx1 vector).
</p>

<p>
Finally,
\[\omega^* = (\lambda\Sigma)^{-1}\Pi\]
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline54" class="outline-3">
<h3 id="orgheadline54"><span class="section-number-3">9.4</span> Black-Litterman model and the process of building the required inputs.</h3>
<div class="outline-text-3" id="text-9-4">
</div><div id="outline-container-orgheadline51" class="outline-4">
<h4 id="orgheadline51"><span class="section-number-4">9.4.1</span> Black-Litterman model</h4>
<div class="outline-text-4" id="text-9-4-1">
</div><ol class="org-ol"><li><a id="orgheadline44"></a>Posterior distribution of expected return combining Prior distribution of equilibrium excess return and investor views.<br  /><div class="outline-text-5" id="text-9-4-1-1">
<p>
One of the core assumptions of the model is that the security returns are normally distributed.
</p>

<ol class="org-ol">
<li>Prior equilibrium excess return distribution</li>
</ol>
<p>
Because of this reason during the implementation of model the prior and conditional probabilities are considered to be normally distributed.
\[N~(\Pi, \tau\Sigma)\]
</p>

<ol class="org-ol">
<li>View distribution</li>
</ol>
<p>
\[N~(Q, \Omega)\]
</p>

<ol class="org-ol">
<li>New combined return distribution(Posterior distribution)</li>
</ol>
<p>
Now as the inputs in the Bayes’ rule are normally distributed so will be the posterior probability.
\[N~(E[R], [(\tau\Sigma)^{-1}+(P'\Omega^{-1}P)]^{-1})\]
</p>

<p>
One can assume different distributions for each of these probabilities and hence create different variants of Black Litterman model.
</p>
</div></li>

<li><a id="orgheadline45"></a>Formula<br  /><div class="outline-text-5" id="text-9-4-1-2">
<p>
\[E(R)=[(\tau\Sigma)^{-1}+P'\Omega^{-1}P]^{-1}[(\tau\Sigma)^{-1}\Pi+P'\Omega^{-1}P]\]
where
</p>

<p>
\(E(R)\)
is the new(posterior) combined return vector(Nx1);
</p>

<p>
\(\tau\)
is a scalar;
</p>

<p>
\(\Sigma\)
is the covariance matrix of excess returns(NxN matrix);
</p>

<p>
\(P\)
is a matrix that identifies the assets involved in the views(KxN);
</p>

<p>
\(\Omega\)
The level of confidence, expressed as the standard deviation around the expected return of the view. The weaker confidence that is set to a view, the less the view is to affect the portfolio weights.
</p>

<p>
Is a diagonal covariance matrix of error terms from the expressed views representing the uncertainty in each view(KxK);对第 i 个观点设置信心水平 LCi，根据信心水平和标准刻度因子 CF 来构建观点误差矩阵Ω.
</p>

<p>
A view has the form \(Q+\epsilon\):
\[\begin{bmatrix}
w1 & 0 & 0\\
0 & ... & 0\\
0 & 0 & w3
\end{bmatrix}\]
</p>

<p>
\(\Pi\)
is the implied equilibrium return vector(Nx1); Equilibrium is an idealized state in which supply equals demand.
\[\begin{cases}
Litterman & \text {percentage} \\
Satchell and Scowcroft & \text{ equal weight } \\
Thomas Idzorek & \text{ market capital weight }
\end{cases}\]
The relative weighting of each individual asset is proportional to the asset’s market capitalization divided by the total market capitalization of either the outperforming or underperforming assets of that particular view.
</p>

<p>
It has three factors: 1. the views; 2. the level of condence assigned to each view; 3.the weight-on-views.
</p>

<p>
The net long positions less the net short positions equal 0.
</p>

<p>
Thus one can calculate the variance of each individual view portfolio \(p_k\Sigma p'_k\).
</p>

<p>
\(Q\)
is the view vector(Kx1);
</p>
<ol class="org-ol">
<li>Idzorek method.</li>
</ol>
<p>
\[Q=\begin{bmatrix}
CF/LC_1 &0  &0 \\0
 &...  &0 \\0
 &0  &CF/LC_k
\end{bmatrix}\], where \[CF=P^*\Sigma P^{*t}/(100/50), LC_k=\text {level of confidence of kth view}, P^* \text {1xn vector, sum of each column from P}\]
</p>
</div></li>

<li><a id="orgheadline50"></a>Investor views<br  /><div class="outline-text-5" id="text-9-4-1-3">
<p>
Absolute or relative manager views regarding the expected return of some of the assets in the portfolio.
</p>

<ul class="org-ul">
<li>absolute view:</li>
</ul>
<p>
Asset A will have an absolute excess return of x%;
</p>

<ul class="org-ul">
<li>relative view 1:</li>
</ul>
<p>
Asset A will outperform/underperform asset B by xx basis point;
</p>

<ul class="org-ul">
<li>relative view 2:</li>
</ul>
<p>
Assets A and B will outperform/underperform assets C and D by xx basis points; Equivallently a mini long/short portfolio including A and B vesus a mini short/long portfolio.
</p>
</div>
<ol class="org-ol"><li><a id="orgheadline48"></a>Assessing views<br  /><ol class="org-ol"><li><a id="orgheadline46"></a>Objective<br  /><div class="outline-text-7" id="text-9-4-1-3-1-1">
<ul class="org-ul">
<li>财务指标</li>
</ul>
<p>
我们考量了其它一些财务指标，如净利润增长率、主营业务收入增长率、净资产收益率等，将各指标进行对比后发现，在我国市场，净利润增长率和主营业务收入增长率等指标非常不稳定、有时具有奇异值，而净资产收益率较为稳定，因此我们在本次实证中使用了净资产收益率作为观点收益，考虑到数据的时效性，我们选用朝阳永续提供的主流券商研究员对行业的一致预期净资产收益率(ROE)数据。
</p>

<p>
使用上年底的一致预期 ROE 作为观点收益，设置 20%、 50%和 80%三个信心水平， W<sub>mkt</sub> 表示按流通市值权重配置的资产组合.
</p>

<ul class="org-ul">
<li>间接的观点</li>
</ul>
<p>
在传统的 B-L 模型中，投资者给出的主观观点是对资产的预期收益，而很多时候投资者可能是一些间接的观点，例如对一些指标的观点（股息率、 EPS、 ROE 等），这些因子可能驱动股价波动。 Wing Cheung 提出了 ABL 模型（Augmented B-L模型），首次将因子模型融入到传统 B-L 模型的框架中，大幅度拓宽了 B-L 模型的适用面。
</p>
</div></li>
<li><a id="orgheadline47"></a>Subjective<br  /><div class="outline-text-7" id="text-9-4-1-3-1-2">
<ul class="org-ul">
<li>分析师主观预期</li>
</ul>
<p>
采用行业、个股一致预期（ consensus data）是对看法（ views）的一个有效构建方式。用个股预期评级综合得分的增长量表示个股预期收益率，具体处理细节是，每一个评分增量（减量）相当于5%预期收益（或-5%预期收益）。
</p>
</div></li></ol></li>
<li><a id="orgheadline49"></a>Confidence level<br  /><div class="outline-text-6" id="text-9-4-1-3-2">
<p>
对第 i 个观点设置信心水平 LCi，根据信心水平和标准刻度因子 CF 来构建观点误差矩阵Ω.
</p>
</div></li></ol></li></ol>
</div>
<div id="outline-container-orgheadline52" class="outline-4">
<h4 id="orgheadline52"><span class="section-number-4">9.4.2</span> Inputs</h4>
<div class="outline-text-4" id="text-9-4-2">
<p>
Input:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">w</td>
<td class="org-left">Equilibrium market capitalization weights for each asset.</td>
</tr>

<tr>
<td class="org-left">Σ</td>
<td class="org-left">Matrix of covariances between the assets. Usually computed from historical data.</td>
</tr>

<tr>
<td class="org-left">rf</td>
<td class="org-left">Risk free rate</td>
</tr>

<tr>
<td class="org-left">δ</td>
<td class="org-left">The risk aversion coeffficient of the market portfolio. This can be specified, or can be computed if the investor knows the market return and standard deviation of returns.</td>
</tr>

<tr>
<td class="org-left">τ</td>
<td class="org-left">A measure of the uncertainty of the prior estimate of the mean returns.   Scalar. Proportional to the relative weight given to the implied equilibrium return vector(\(\Pi\)).       Usually between 0.01~0.05.</td>
</tr>
<tbody>
<tr>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgheadline53" class="outline-4">
<h4 id="orgheadline53"><span class="section-number-4">9.4.3</span> Steps:</h4>
<div class="outline-text-4" id="text-9-4-3">
<ol class="org-ol">
<li>Π = δΣw</li>
</ol>
<p>
Calculate the equilibrium return using reverse optimization.
\[\Pi=\lambda\Sigma\omega_{mkt}\]
</p>

<p>
Calculate implied market equilibrium returns based on the given benchmark asset allocation weights.
</p>
<ol class="org-ol">
<li>Quantify their uncertainty in the prior by selecting a value for τ.</li>
</ol>
<p>
If the covariance matrix has been generated from historical data, then τ = 1/n is a good place to start.
</p>
<ol class="org-ol">
<li>Formulates their views, specifying P, Ω, and Q.</li>
</ol>
<p>
Given k views and n assets, then P is a k × n matrix where each row sums to 0 (relative view) or 1 (absolute view).
Q is a k × 1 vector of the excess returns for each view.
Ω is a diagonal k × k matrix of the variance of the estimated view mean about the unknown view mean. As a starting point, some authors call for the diagonal values of Ω to be set equal to pTτΣp (where p is the row from P for the specific view). This weights the views the same as the prior estimates.
考虑有K个观点n个资产的例子，此时，P就是k*n矩阵，每一行代表一个观点，Q为K*1矩阵，存放每个观点的超额收益。Ω是k*k对角矩阵，对角线上的每一个元素代表该观点的方差，与对该观点的置信程度成反比:
\[\Omega=(P\Sigma P^T)\tau\]
</p>

<p>
For example:
</p>

<div class="figure">
<p><img src="./images/expected_excess_return_vector.png" alt="expected_excess_return_vector.png" />
</p>
<p><span class="figure-number">Figure 2:</span> expected<sub>excess</sub><sub>return</sub><sub>vector</sub></p>
</div>

<p>
View 1: International Developed Equity will have an absolute excess return of 5.25% (Confidence of View = 25%).
</p>

<p>
View 2: International Bonds will outperform US Bonds by 25 basis points (Confidence of View = 50%).
</p>

<p>
View 3: US Large Growth and US Small Growth will outperform US Large Value and US Small Value by 2% (Confidence of View = 65%).
</p>

<p>
\[P=\begin{bmatrix}
0 &0  &0  &0  &0  &0  &1  &0 \\
-1 &1  &0  &0  &0  &0  &0  &0 \\
0 &0  &.5  &-.5  &.5  &-.5  &0  &0
\end{bmatrix}\]
</p>

<p>
\[Q=\begin{bmatrix}
 5.25 \\
 0.25 \\
 2
\end{bmatrix}\]
</p>

<ol class="org-ol">
<li>Compute the posterior estimate of the returns using the following equation.</li>
</ol>
<p>
\[\hat\Pi = \Pi + \tau\Sigma P'(P\tau\Sigma P')^{-1}(Q-P\Pi)\]
</p>
<ol class="org-ol">
<li>Compute the posterior variance of the estimated mean about the unknown mean using the following equation.</li>
</ol>
<p>
\[M=\tau \Sigma - \tau \Sigma P'[P\tau\Sigma P'+\Omega]^{-1}P\tau \Sigma\]
</p>
<ol class="org-ol">
<li>Get the covariance of retujrns about the estimated mean.</li>
</ol>
<p>
Assuming the uncertainty in the estimates is independent of the known covariance of returns about the unknown mean.
\[\Sigma_p = \Sigma + M\]
</p>
<ol class="org-ol">
<li>Compute the portfolio weights for the optimal portfolio on the unconstrained efficient frontier.</li>
</ol>
<p>
\[\hat {\omega}=(\lambda\Sigma_p)^{-1}\hat {\Pi}\]
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline57" class="outline-3">
<h3 id="orgheadline57"><span class="section-number-3">9.5</span> Implied confidence framework for the views</h3>
<div class="outline-text-3" id="text-9-5">
<p>
\(\Omega\), which representing the uncertainty of the views, and \(\tau\) are the most abstract mathematical parameters of this model.
</p>

<p>
how to specify a probability density function for each view?
</p>
</div>

<div id="outline-container-orgheadline55" class="outline-4">
<h4 id="orgheadline55"><span class="section-number-4">9.5.1</span> Implied confidence levels</h4>
<div class="outline-text-4" id="text-9-5-1">
<p>
\[\frac{\hat {\omega} - \omega_{mkt}}{\hat {\omega_{100%}} - \omega_{mkt}}\]
</p>
</div>
</div>

<div id="outline-container-orgheadline56" class="outline-4">
<h4 id="orgheadline56"><span class="section-number-4">9.5.2</span> An intuitive approach</h4>
</div>
</div>

<div id="outline-container-orgheadline60" class="outline-3">
<h3 id="orgheadline60"><span class="section-number-3">9.6</span> The constrained portfolio</h3>
<div class="outline-text-3" id="text-9-6">
</div><div id="outline-container-orgheadline58" class="outline-4">
<h4 id="orgheadline58"><span class="section-number-4">9.6.1</span> Risk constraint:</h4>
<div class="outline-text-4" id="text-9-6-1">
<p>
If the investor is targeting a risk level of 20% per annum, one can calculate the constrainted optimal portfolio weights by taking the unconstrained optimal portfolio weights by taking the unconstrained optimal weights, multiplying it by the raio of the targeted risk level of 20% and the volatility of the unconstrained optimal portfolio.
</p>
</div>
</div>

<div id="outline-container-orgheadline59" class="outline-4">
<h4 id="orgheadline59"><span class="section-number-4">9.6.2</span> Budget constraint:</h4>
<div class="outline-text-4" id="text-9-6-2">
<p>
a linear combination of the unconstrained optimal portfolio and the global minimum variance portfolio.
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline61" class="outline-3">
<h3 id="orgheadline61"><span class="section-number-3">9.7</span> Select asset classes</h3>
<div class="outline-text-3" id="text-9-7">
<p>
criteria for specifying asset classes are:
</p>
<ul class="org-ul">
<li>Assets within an Asset Class should be homogenous.</li>
<li>Asset Classes should be mutually exclusive.</li>
<li>Asset Classes should be diversifying.</li>
<li>All Asset Classes as a group should make up a significant fraction of all investor's wealth.</li>
<li>The Asset Class should have the capacity to absorb a significant fraction of the investor's wealth.</li>
</ul>


<ul class="org-ul">
<li>Domestic Equity (can be further sub-divided by value vs growth, or large cap vs small cap).</li>
<li>International Equity (can be further divided by developed, emerging, or frontier, or large cap vs small cap, or value vs growth).</li>
<li>Domestic Fixed Income (can be further divided by sovereign vs corporate, nominal vs inflation protected, short vs long term, furher sub-divided by issuer or credit rating).</li>
<li>International Fixed Income (can be further divided by sovereign vs corporate, nominal vs inflation protected, developed vs emerging, or other distinctions.</li>
<li>Real Estate (can be further divided by public vs private, type of real estate holding, loans vs properties, domestic vs international).</li>
<li>Commodities (can be further divided by public vs private, by type, e.g. energy vs crops vs metals).</li>
<li>Private Equity (can be divided by domestic vs international)</li>
<li>Cash or cash equivalents</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline62" class="outline-3">
<h3 id="orgheadline62"><span class="section-number-3">9.8</span> Deployment on GS:</h3>
</div>


<div id="outline-container-orgheadline63" class="outline-3">
<h3 id="orgheadline63"><span class="section-number-3">9.9</span> Shortfall of BLM</h3>
<div class="outline-text-3" id="text-9-9">
<ul class="org-ul">
<li>非正态分布市场</li>
</ul>
<p>
由于 B-L 模型里假设的资产收益都是服从正态分布，这对绝大多数市场来说并不现实， Attilio Meucci 提出了在非正态分布的条件下如何去使用 B-L 模型，并且在对风险的处理中，不再采用传统B-L 模型里的方式，也就是说不再用方差来表示风险，改用 CVAR 等来描述风险，以便能够捕捉到非对称和尾部的风险。
</p>

<ul class="org-ul">
<li>多因子扩展模型</li>
</ul>
<p>
在传统的 B-L模型中，投资者给出的主观观点是对资产的预期收益，而很多时候投资者可能是一些间接的观点，例如对一些指标的观点（股息率、 EPS、 ROE 等），这些因子可能驱动股价波动。Wing Cheung 提出了 ABL 模型（Augmented B-L 模型），首次将因子模型融入到传统 B-L 模型的框架中，大幅度拓宽了 B-L 模型的适用面。
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline72" class="outline-2">
<h2 id="orgheadline72"><span class="section-number-2">10</span> Risk parity</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-orgheadline68" class="outline-3">
<h3 id="orgheadline68"><span class="section-number-3">10.1</span> Basics</h3>
<div class="outline-text-3" id="text-10-1">
</div><div id="outline-container-orgheadline65" class="outline-4">
<h4 id="orgheadline65"><span class="section-number-4">10.1.1</span> Risk Contribution</h4>
<div class="outline-text-4" id="text-10-1-1">
<p>
\[\sigma^2 = w_1^2\sigma_1^2 + 2*corr*w_1*w2*\sigma_1*\sigma_2+w_2^2\sigma_2^2\]
\[\sigma_1^2 = w_1^2\sigma_1^2 + corr*w_1*w2*\sigma_1*\sigma_2\]
</p>
</div>
</div>

<div id="outline-container-orgheadline66" class="outline-4">
<h4 id="orgheadline66"><span class="section-number-4">10.1.2</span> Marginal risk contribution</h4>
<div class="outline-text-4" id="text-10-1-2">
<p>
marginal contribution to risk measures the change in portfolio risk when the weight of an asset in the portfolio changes from the current weight.
This concept, in turn, can also be expressed as a <b>utility function, a partial derivative of portfolio risk with respect to weights.</b>
</p>

<p>
The risk contribution is a close approximation of loss contribution when the portfolio su ers a signicant loss.
\[L_s/L≈p_s, L_b/L≈p_b\]
This relationship between risk contribution and loss contribution validates the concept of risk contribution. It is the theoretical foundation of risk parity portfolios.
</p>
</div>
</div>

<div id="outline-container-orgheadline67" class="outline-4">
<h4 id="orgheadline67"><span class="section-number-4">10.1.3</span> risk parity</h4>
<div class="outline-text-4" id="text-10-1-3">
<p>
The mathematical process of MVO is to maximize a utility function based on the expected return and risk of the portfolio. While this is a well-defined mathematical problem, its outcome is often a highly concentrated portfolio. this is because the optimization procedure is highly sensitive to both return and risk inputs. Any minute change in both can cause seismic changes in the optimized portfolio weights. These drawbacks often cause mean-variance portfolios to be unintuitive and hence hard to use in practice.
</p>

<p>
why not start with a balanced risk allocation and seek the portfolio that matches the prescribed risk allocation?
</p>

<p>
Risk parity portfolio construction is di erent in two key aspects. First, it does not rely on return forecast per se.
The second aspect of risk parity is it does not use an optimization process. As a result, risk parity portfolio weights are less sensitive to risk inputs.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline69" class="outline-3">
<h3 id="orgheadline69"><span class="section-number-3">10.2</span> IMPLEMENTING ACTUAL RISK PARITY PORTFOLIOS</h3>
<div class="outline-text-3" id="text-10-2">
<p>
In order for investors to seek <b>higher returns</b>, they must take on higher risk. The question is how to take that risk. The traditional approach is to concentrate in riskier assets, in particular equities. In contrast, the Risk Parity approach is to start with a diversied lower-risk portfolio and then <b>use leverage</b> to raise the expected return. (The use of leverage introduces its own risks, of course, particularly when investments are illiquid. To mitigate this, Risk Parity portfolios tend to invest in <b>liquid instruments such as fnancial futures contracts.</b>) Risk Parity investors believe that some leveraging of a more diversied <b>liquid</b> portfolio is a fundamentally better way to achieve higher returns than the traditional approach of concentrating in the riskiest assets.
</p>

<ul class="org-ul">
<li>Breadth of instruments used.</li>
</ul>
<p>
While the Simple Risk Parity Strategy invests in only three asset classes, <b>actual Risk Parity portfolios can incorporate additional asset classes. Since these instruments are not perfectly correlated with each other</b>, this further enhances the level of risk diversication and the efficiency of the total portfolio.
</p>
<ul class="org-ul">
<li>Correlation and volatility forecasting.</li>
</ul>
<p>
While the Simple Risk Parity Strategy targets an equal amount of risk in each asset class, a real-life implementation would incorporate correlations across different asset classes in order to equalize risk contributions. In addition, <b>proprietary risk models can be utilized to improve volatility forecasts</b>, which can help maintain the risk balance across asset classes and more consistent portfolio level volatility over time.
</p>
<ul class="org-ul">
<li>Tactical over/underweights.</li>
</ul>
<p>
The Simple Risk Parity approach described so far was based on an equal allocation of risk to each of three major risk categories. Indeed, some practical implementations use this “passive” approach to budgeting risk across these categories. However, it is also possible to use the “equal risk across categories” portfolio as the neutral allocation, and then over- or under-weight the risk allocations based on the manager’s tactical views.
</p>
<ul class="org-ul">
<li>Different volatility targets.</li>
</ul>
<p>
In the exposition above, we used an annualized volatility target of about 10%, which corresponds to the approximate average volatility of a 60/40 portfolio. However, by changing the amount of leverage used, it is easy to construct portfolios of an arbitrary level of volatility — e.g. that of a 70/30 portfolio, 80/20 portfolio, or even a 100% equity portfolio. We believe that Risk Parity is a far superior approach to building “target risk” portfolios than those conventionally used.
</p>
<ul class="org-ul">
<li>Trading systems and risk control.</li>
</ul>
<p>
Managers can also use proprietary <b>algorithmic trading systems</b> in order to <b>trade passively and reduce trading costs or market impact while adjusting position sizes</b>. Finally, systematic portfolio level drawdown control systems can be used in order to minimize portfolio losses during challenging periods for the strategy.
</p>
</div>
</div>

<div id="outline-container-orgheadline70" class="outline-3">
<h3 id="orgheadline70"><span class="section-number-3">10.3</span> INVESTING IN RISK PARITY</h3>
<div class="outline-text-3" id="text-10-3">
<ul class="org-ul">
<li>Core/Satellite Approach.</li>
</ul>
<p>
This core portfolio can also be supplemented by other uncorrelated strategies, such as alternative investments. Some large institutions have moved in the direction of this “core/ satellite” approach to building their portfolios.
</p>
<ul class="org-ul">
<li>Alternative investments.</li>
</ul>
<p>
Risk Parity portfolios, which have approximately a 0.5 correlation to equities, would be classi ed as a “directional” alternative rather than a zero beta, non-directional alternative strategy.
</p>
<ul class="org-ul">
<li>Opportunistic or Flexible Allocation.</li>
<li>Global Tactical Asset Allocation (GTAA).</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline71" class="outline-3">
<h3 id="orgheadline71"><span class="section-number-3">10.4</span> Conclusion</h3>
<div class="outline-text-3" id="text-10-4">
<p>
• reduced equity concentration and reduced tail risk,
• more meaningful diversi cation than traditional approaches,
• a portfolio that is more robust in different economic environments, and
• an opportunity to improve the risk/return characteristics of an overall portfolio, by either enhancing return, reducing risk, or a combination of both.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline73" class="outline-2">
<h2 id="orgheadline73"><span class="section-number-2">11</span> NLP</h2>
<div class="outline-text-2" id="text-11">
<ul class="org-ul">
<li>Hidden factor model</li>
<li>portfolio optimization based on factor model</li>
<li>non linear constrain on factor model</li>
</ul>

<p>
accounting formula production function, using unit conversion, to do mathematical analysis.
</p>

<p>
opinions/factors can be used as constraints on factors with hiden factor model.
</p>

<p>
such factor constraints can be used in Black-Litterman model.
</p>
</div>
</div>
</div>
</body>
</html>
